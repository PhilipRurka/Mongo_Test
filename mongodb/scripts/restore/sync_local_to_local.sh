#!/bin/bash

read -p "Are you sure you want to continue? You may lose local db progress. (y/n) " -n 1 -r
echo

if [[ $REPLY =~ ^[Yy]$ ]]
then
    mongosh "mongodb://localhost:27017" --eval "db.getSiblingDB('Staging').dropDatabase()"
    mongorestore --uri=mongodb://localhost:27017 --drop mongodb/dump/local

    echo ""
    echo ""
    echo "██╗░░░░░░█████╗░░█████╗░░█████╗░██╗░░░░░  ░░░░░░░░░░░░██╗░░  ██╗░░░░░░█████╗░░█████╗░░█████╗░██╗░░░░░"
    echo "██║░░░░░██╔══██╗██╔══██╗██╔══██╗██║░░░░░  ░░░░░░░░░░░░╚██╗░  ██║░░░░░██╔══██╗██╔══██╗██╔══██╗██║░░░░░"
    echo "██║░░░░░██║░░██║██║░░╚═╝███████║██║░░░░░  █████╗█████╗░╚██╗  ██║░░░░░██║░░██║██║░░╚═╝███████║██║░░░░░"
    echo "██║░░░░░██║░░██║██║░░██╗██╔══██║██║░░░░░  ╚════╝╚════╝░██╔╝  ██║░░░░░██║░░██║██║░░██╗██╔══██║██║░░░░░"
    echo "███████╗╚█████╔╝╚█████╔╝██║░░██║███████╗  ░░░░░░░░░░░░██╔╝░  ███████╗╚█████╔╝╚█████╔╝██║░░██║███████╗"
    echo "╚══════╝░╚════╝░░╚════╝░╚═╝░░╚═╝╚══════╝  ░░░░░░░░░░░░╚═╝░░  ╚══════╝░╚════╝░░╚════╝░╚═╝░░╚═╝╚══════╝"
    echo ""
    echo ""

else
    echo ""
    echo ""
    echo "░█████╗░██████╗░░█████╗░██████╗░████████╗"
    echo "██╔══██╗██╔══██╗██╔══██╗██╔══██╗╚══██╔══╝"
    echo "███████║██████╦╝██║░░██║██████╔╝░░░██║░░░"
    echo "██╔══██║██╔══██╗██║░░██║██╔══██╗░░░██║░░░"
    echo "██║░░██║██████╦╝╚█████╔╝██║░░██║░░░██║░░░"
    echo "╚═╝░░╚═╝╚═════╝░░╚════╝░╚═╝░░╚═╝░░░╚═╝░░░"
    echo ""
    echo ""
    
    exit 0
fi