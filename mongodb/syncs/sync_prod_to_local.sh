#!/bin/bash

read -p "Are you sure you want to continue? You may lose local db progress. (y/n) " -n 1 -r
echo

if [[ $REPLY =~ ^[Yy]$ ]]
then
    mongosh "mongodb://localhost:27017" --eval "db.getSiblingDB('Staging').dropDatabase()"
    mongorestore --uri=mongodb://localhost:27017 --drop mongodb/dump/production

    echo ""
    echo ""
    echo "██████╗░██████╗░░█████╗░██████╗░  ░░░░░░░░░░░░██╗░░  ██╗░░░░░░█████╗░░█████╗░░█████╗░██╗░░░░░"
    echo "██╔══██╗██╔══██╗██╔══██╗██╔══██╗  ░░░░░░░░░░░░╚██╗░  ██║░░░░░██╔══██╗██╔══██╗██╔══██╗██║░░░░░"
    echo "██████╔╝██████╔╝██║░░██║██║░░██║  █████╗█████╗░╚██╗  ██║░░░░░██║░░██║██║░░╚═╝███████║██║░░░░░"
    echo "██╔═══╝░██╔══██╗██║░░██║██║░░██║  ╚════╝╚════╝░██╔╝  ██║░░░░░██║░░██║██║░░██╗██╔══██║██║░░░░░"
    echo "██║░░░░░██║░░██║╚█████╔╝██████╔╝  ░░░░░░░░░░░░██╔╝░  ███████╗╚█████╔╝╚█████╔╝██║░░██║███████╗"
    echo "╚═╝░░░░░╚═╝░░╚═╝░╚════╝░╚═════╝░  ░░░░░░░░░░░░╚═╝░░  ╚══════╝░╚════╝░░╚════╝░╚═╝░░╚═╝╚══════╝"
    echo ""
    echo ""
else
    # If user does not confirm, exit the script
    echo ""
    echo ""
    echo "░█████╗░██████╗░░█████╗░██████╗░████████╗"
    echo "██╔══██╗██╔══██╗██╔══██╗██╔══██╗╚══██╔══╝"
    echo "███████║██████╦╝██║░░██║██████╔╝░░░██║░░░"
    echo "██╔══██║██╔══██╗██║░░██║██╔══██╗░░░██║░░░"
    echo "██║░░██║██████╦╝╚█████╔╝██║░░██║░░░██║░░░"
    echo "╚═╝░░╚═╝╚═════╝░░╚════╝░╚═╝░░╚═╝░░░╚═╝░░░"
    echo ""
    echo ""
    
    exit 0
fi